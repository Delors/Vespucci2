<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>
<plugin>
  <extension
      point="org.eclipse.graphiti.ui.diagramTypes">
    <diagramType
      description="This is the diagram type for the Slice Editor"
      id="de.opalproject.vespucci.sliceEditor.sliceEditorDiagramType"
      name="sliceEditor Diagram Type"
      type="sliceEditor">
    </diagramType>
  </extension>

  <extension
      point="org.eclipse.graphiti.ui.diagramTypeProviders">
    <diagramTypeProvider
      class="de.opalproject.vespucci.sliceEditor.SliceEditorDiagramTypeProvider"
      description="This the editor for the sliceEditor"
      id="de.opalproject.vespucci.sliceEditor.sliceEditorDiagramTypeProvider"
      name="sliceEditor">
      <diagramType
        id="de.opalproject.vespucci.sliceEditor.sliceEditorDiagramType">
      </diagramType>
      <imageProvider
            id="de.opalproject.vespucci.sliceEditor.ImageProvider">
      </imageProvider>
   </diagramTypeProvider>
 </extension>

<extension
      point="org.eclipse.graphiti.ui.imageProviders">
   <imageProvider
         class="de.opalproject.vespucci.sliceEditor.SliceEditorImageProvider"
         id="de.opalproject.vespucci.sliceEditor.ImageProvider">
   </imageProvider>
    

  </extension>
<extension
      id="de.opalproject.vespucci.sliceEditor.childMarker"
      name="VespucciChildMarker"
      point="org.eclipse.core.resources.markers">
   <persistent
         value="true">
   </persistent>
   <super
         type="de.opalproject.vespucci.sliceEditor.sliceMarker">
   </super>
</extension>
<extension
      id="de.opalproject.vespucci.sliceEditor.parentMarker"
      name="VespucciParentMarker"
      point="org.eclipse.core.resources.markers">
   <persistent
         value="true">
   </persistent>
   <super
         type="de.opalproject.vespucci.sliceEditor.sliceMarker">
   </super>
</extension>
<extension
      id="de.opalproject.vespucci.sliceEditor.sliceMarker"
      name="sliceMarker"
      point="org.eclipse.core.resources.markers">
   <super
         type="org.eclipse.core.resources.problemmarker">
   </super>
   <attribute
         name="IDE.EDITOR_ID_ATTR">
   </attribute>
</extension>
<extension
      point="org.eclipse.ui.editors">
   <editor
         class="de.opalproject.vespucci.sliceEditor.SliceDiagramEditor"
         default="false"
         icon="res/Slice.gif"
         id="de.opalproject.vespucci.sliceEditor"
         name="Slice Editor">
   </editor>
</extension>

<extension point="org.eclipse.ui.commands">
	<command id="de.opalproject.vespucci.sliceEditor.commands.darkSliceUpdate" name="Update Slices in response to deleted Ensembles" /> 
</extension>

<extension point="org.eclipse.ui.handlers">
	<handler commandId="de.opalproject.vespucci.sliceEditor.commands.darkSliceUpdate" class="de.opalproject.vespucci.sliceEditor.features.dark.DarkSliceUpdateFeatureHandler">
	<enabledWhen>
				<reference definitionId="de.opalproject.vespucci.sliceEditor.definitions.ensembles" /> 
			</enabledWhen>
			<activeWhen>
				<reference definitionId="de.opalproject.vespucci.sliceEditor.definitions.ensembles" /> 
			</activeWhen>
	</handler>
</extension>
 <extension
         point="org.eclipse.core.expressions.definitions">
      <definition id="de.opalproject.vespucci.sliceEditor.definitions.ensembles">
         <with variable="selection">
            <iterate ifEmpty="false" operator="and">
               <instanceof value="de.opalproject.vespucci.datamodel.Ensemble" />
            </iterate>
         </with>
      </definition>
</extension>  
</plugin>
